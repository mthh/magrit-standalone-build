<!DOCTYPE html>
<html>
<head>
  <title>Magrit</title>
</head>
<body>
<div style="text-align: center;">
	<h1>Loading ...</h1>
</div>
<p id="foo">
</p>
<script>
var spawn = require('child_process').spawn;
var child = spawn(
	'./Magrit',
    { cwd: './Magrit/dist/Magrit/', detached: true },
	function(error, stdout, stderr) {
		document.getElementById('foo').innerHTML += "stdout: " + stdout;
		document.getElementById('foo').innerHTML += "stderr: " + stderr;
		console.log('stdout: ' + stdout);
		console.log('stderr: ' + stderr);
		if (error !== null) {
			console.log('exec error: ' + error)
		}
	});
var nw = require('nw.gui');
var win = nw.Window.get();
win.maximize();
setTimeout(() => {
	window.location = 'http://localhost:9999/';
}, 1800);
win.on('close', function() {
	process.kill(-child.pid);
	this.hide();
	this.close(true);
});
win.on('closed', function() {
	this.hide();
	this.close(true);
    process.exit();
});
</script>
</body>
</html>
